---
- name: Configure VLANs
  hosts: switches
  gather_facts: false
  connection: ansible.netcommon.network_cli

  vars:
    ansible_network_os: cisco.ios.ios

  tasks:
  - name: Config VLANs
    cisco.ios.ios_vlans:
      config:
        - name: Vlan_10
          vlan_id: 10
          state: active
          shutdown: disabled
          remote_span: true
        - name: Vlan_20
          vlan_id: 20
          mtu: 610
          state: active
          shutdown: enabled
      state: merged

#    - name: Create VLAN 10
#      ios_command:
#        commands:
#          - "vlan 10"

#    - name: Create VLAN 20
#      ios_command:
#        commands:
#          - "vlan 20"

    - name: Assign IP address to VLAN 10
      cisco.ios.ios_l3_interfaces:
        config:
          - name: Vlan10
            ipv4: 
              - address: 192.168.10.1/24
#            vlan: 10
          - name: Vlan20
            ipv4:
              - address: 192.168.20.1/24
#            vlan: 20
        state: merged
